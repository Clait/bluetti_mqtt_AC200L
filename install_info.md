For anyone looking for a super simple way to integrate into HA OS (Home Assistant Operating System), here's the cleanest, lowest code route I've found:

Find your device ID: I did this by [getting into the HA OS host, then Docker instance](https://developers.home-assistant.io/docs/operating-system/debugging/), then manually installing bluetti_mqtt (pip install bluetti_mqtt) and running the --scan command (there's likely an easier way to do this).

Setup MQTT (if you haven't yet): Follow directions here - https://www.home-assistant.io/docs/mqtt/broker/ (including user/password combo)

Create script/shell_command integration: I created a new directory in /config/ called "shell" and placed a new script called install_start_bluetti_mqtt.sh in it. Inside that script (replace USERNAME, PASSWORD, DEVICE_ID with yours):

```sh
#!/bin/bash
pip install bluetti_mqtt
nohup bash -c "bluetti-mqtt --broker 127.0.0.1 --username USERNAME --password PASSWORD DEVICE_ID &"
```

Once that's in there, add this to the root of your configuration.yaml:

```yaml
shell_command:
  install_start_bluetti: bash /config/shell/install_start_bluetti_mqtt.sh
```

Setup automation: Super simple automation that trigger's on HA start (can create with the GUI in Settings>Automations>Create Automation):
Note: the "id" value here has no connection to the DEVICE_ID, it's auto-generated by HA when creating a new automation

```yaml
- id: '1665937079543'
  alias: Install and start bluetti-mqtt on HA start
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: shell_command.install_start_bluetti
    data: {}
  mode: single
```

Have this up and running for my WIP AC300+2xB300+2xPV350 build - running HA OS 9 on a Raspberry Pi 3. Obviously a temp solution, but working well for now! Going to dig into HA OS 9+ BT support and see if I can help further a native HA integration.

[Source](https://diysolarforum.com/threads/monitoring-bluetti-systems.37870/page-3#post-622203)
